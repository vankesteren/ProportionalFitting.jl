<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · ProportionalFitting.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://vankesteren.github.io/ProportionalFitting.jl/reference/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ProportionalFitting.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../benchmarks/">Benchmarks</a></li><li class="is-active"><a class="tocitem" href>Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/vankesteren/ProportionalFitting.jl/blob/main/docs/src/reference.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Reference"><a class="docs-heading-anchor" href="#Reference">Reference</a><a id="Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Reference" title="Permalink"></a></h1><ul><li><a href="#Core.Array-Union{Tuple{ArrayFactors{T}}, Tuple{T}} where T"><code>Core.Array</code></a></li><li><a href="#ProportionalFitting.ArrayFactors"><code>ProportionalFitting.ArrayFactors</code></a></li><li><a href="#ProportionalFitting.ArrayMargins"><code>ProportionalFitting.ArrayMargins</code></a></li><li><a href="#ProportionalFitting.DimIndices"><code>ProportionalFitting.DimIndices</code></a></li><li><a href="#ProportionalFitting.default_dimindices-Tuple{Vector{&lt;:AbstractArray}}"><code>ProportionalFitting.default_dimindices</code></a></li><li><a href="#ProportionalFitting.ipf-Tuple{AbstractArray{&lt;:Real}, ArrayMargins}"><code>ProportionalFitting.ipf</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="Core.Array-Union{Tuple{ArrayFactors{T}}, Tuple{T}} where T" href="#Core.Array-Union{Tuple{ArrayFactors{T}}, Tuple{T}} where T"><code>Core.Array</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Array(AF::ArrayFactors{T})</code></pre><p>Create an array out of an ArrayFactors object.</p><p><strong>Arguments</strong></p><ul><li><code>A::ArrayFactors{T}</code>: Array factors</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; fac = ArrayFactors([[1,2,3], [4,5], [6,7]])
Factors for array of size (3, 2, 2):
    1: [1, 2, 3]
    2: [4, 5]
    3: [6, 7]

julia&gt; Array(fac)
3×2×2 Array{Int64, 3}:
[:, :, 1] =
 24  30
 48  60
 72  90

[:, :, 2] =
 28   35
 56   70
 84  105</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/vankesteren/ProportionalFitting.jl/blob/19bd86bf5fac3b12f9b73662574f20d83a813a31/src/ArrayFactors.jl#L92-L120">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProportionalFitting.ArrayFactors" href="#ProportionalFitting.ArrayFactors"><code>ProportionalFitting.ArrayFactors</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ArrayFactors(af::Vector{&lt;:AbstractArray}, di::DimIndices)
ArrayFactors(af::Vector{&lt;:AbstractArray}, di::Vector)
ArrayFactors(af::Vector{&lt;:AbstractArray})</code></pre><p>Array factors are defined such that the array&#39;s elements are their products: <code>M[i, j, ..., l] = af[1][i] * af[2][j] * ... * af[3][l]</code>.</p><p>The array factors can be vectors or multidimensional arrays themselves.</p><p>The main use of ArrayFactors is as a memory-efficient representation of a multidimensional array, which can be constructed using the <code>Array()</code> method.</p><p>see also: <a href="#ProportionalFitting.ipf-Tuple{AbstractArray{&lt;:Real}, ArrayMargins}"><code>ipf</code></a>, <a href="#ProportionalFitting.ArrayMargins"><code>ArrayMargins</code></a>, <a href="#ProportionalFitting.DimIndices"><code>DimIndices</code></a></p><p><strong>Fields</strong></p><ul><li><code>af::Vector{&lt;:AbstractArray}</code>: Vector of (multidimensional) array factors</li><li><code>di::DimIndices</code>: Dimension indices to which the array factors belong.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; AF = ArrayFactors([[1,2,3], [4,5]])
Factors for array of size (3, 2):
  [1]: [1, 2, 3]
  [2]: [4, 5]

julia&gt; eltype(AF)
Int64

julia&gt; Array(AF)
3×2 Matrix{Int64}:
  4   5
  8  10
 12  15

julia&gt; AF = ArrayFactors([[1,2,3], [4 5; 6 7]], DimIndices([2, [1, 3]]))
Factors for 3D array:
  [2]: [1, 2, 3]
  [1, 3]: [4 5; 6 7]

julia&gt; Array(AF)
2×3×2 Array{Int64, 3}:
[:, :, 1] =
 4   8  12
 6  12  18

[:, :, 2] =
 5  10  15
 7  14  21</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/vankesteren/ProportionalFitting.jl/blob/19bd86bf5fac3b12f9b73662574f20d83a813a31/src/ArrayFactors.jl#L1-L52">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProportionalFitting.ArrayMargins" href="#ProportionalFitting.ArrayMargins"><code>ProportionalFitting.ArrayMargins</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ArrayMargins(am::Vector{&lt;:AbstractArray}, di::DimIndices)
ArrayMargins(am::Vector{&lt;:AbstractArray}, di::Vector)
ArrayMargins(am::Vector{&lt;:AbstractArray})
ArrayMargins(X::AbstractArray, di::DimIndices)
ArrayMargins(X::AbstractArray)</code></pre><p>ArrayMargins are marginal sums of an array, combined with the indices of the dimensions these sums belong to. The marginal sums can be multidimensional arrays themselves.</p><p>There are various constructors for ArrayMargins, based on either raw margins or an actual array from which the margins are then computed.</p><p>see also: <a href="#ProportionalFitting.DimIndices"><code>DimIndices</code></a>, <a href="#ProportionalFitting.ArrayFactors"><code>ArrayFactors</code></a>, <a href="#ProportionalFitting.ipf-Tuple{AbstractArray{&lt;:Real}, ArrayMargins}"><code>ipf</code></a></p><p><strong>Fields</strong></p><ul><li><code>am::Vector{AbstractArray}</code>: Vector of marginal sums.</li><li><code>di::DimIndices</code>: Dimension indices to which the elements of <code>am</code> belong.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; X = reshape(1:12, 2, 3, 2)
2×3×2 reshape(::UnitRange{Int64}, 2, 3, 2) with eltype Int64:
[:, :, 1] =
 1  3  5
 2  4  6

[:, :, 2] =
 7   9  11
 8  10  12

julia&gt; ArrayMargins(X)
Margins from 3D array:
  [1]: [36, 42]
  [2]: [18, 26, 34]
  [3]: [21, 57]

julia&gt; ArrayMargins(X, [1, [2, 3]])
Margins from 3D array:
  [1]: [36, 42]
  [2, 3]: [3 15; 7 19; 11 23]

julia&gt; ArrayMargins(X, [2, [3, 1]])
Margins of 3D array:
  [2]: [18, 26, 34]
  [3, 1]: [9 12; 27 30]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/vankesteren/ProportionalFitting.jl/blob/19bd86bf5fac3b12f9b73662574f20d83a813a31/src/ArrayMargins.jl#L1-L50">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProportionalFitting.DimIndices" href="#ProportionalFitting.DimIndices"><code>ProportionalFitting.DimIndices</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">DimIndices(idx::Vector{Vector{Int}})</code></pre><p>DimIndices represent an exhaustive list of indices for the  dimensions of an array. It is an object containing a single element, <code>idx</code>, which is a nested vector of integers;  e.g., <code>[[2], [1, 3], [4]]</code>. DimIndices objects are checked for  uniqueness and completeness, i.e., all indices up to the largest index are used exactly once.</p><p><strong>Fields</strong></p><ul><li><code>idx::Vector{Vector{Int}}</code>: nested vector of dimension indices.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; DimIndices([2, [1, 3], 4])
Indices for 4D array:
[[2], [1, 3], [4]]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/vankesteren/ProportionalFitting.jl/blob/19bd86bf5fac3b12f9b73662574f20d83a813a31/src/DimIndices.jl#L1-L20">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProportionalFitting.default_dimindices-Tuple{Vector{&lt;:AbstractArray}}" href="#ProportionalFitting.default_dimindices-Tuple{Vector{&lt;:AbstractArray}}"><code>ProportionalFitting.default_dimindices</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">default_dimindices(m::Vector{&lt;:AbstractArray})</code></pre><p>Create default dimensions from a vector of arrays. These dimensions are assumed to be ordered. For example, for  the dimensions will be [[1], [2], [3]]. For [[1, 2], [2 1 ; 3 4]], it will be [[1], [2, 3]].</p><p>See also: <a href="#ProportionalFitting.DimIndices"><code>DimIndices</code></a></p><p><strong>Arguments</strong></p><ul><li><code>m::Vector{&lt;:AbstractArray}</code>: Array margins or factors.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; default_dimindices([[1, 2], [2, 1], [3, 4]])
Indices for 3D array:
    [[1], [2], [3]]

julia&gt; default_dimindices([[1, 2], [2 1 ; 3 4]])
Indices for 3D array:
    [[1], [2, 3]]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/vankesteren/ProportionalFitting.jl/blob/19bd86bf5fac3b12f9b73662574f20d83a813a31/src/DimIndices.jl#L45-L68">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProportionalFitting.ipf-Tuple{AbstractArray{&lt;:Real}, ArrayMargins}" href="#ProportionalFitting.ipf-Tuple{AbstractArray{&lt;:Real}, ArrayMargins}"><code>ProportionalFitting.ipf</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ipf(X::AbstractArray{&lt;:Real}, mar::ArrayMargins; maxiter::Int = 1000, tol::Float64 = 1e-10)
ipf(X::AbstractArray{&lt;:Real}, mar::Vector{&lt;:Vector{&lt;:Real}})
ipf(mar::ArrayMargins)
ipf(mar::Vector{&lt;:Vector{&lt;:Real}})</code></pre><p>Perform iterative proportional fitting (factor method). The array (X) can be any number of dimensions, and the margins can be multidimensional as well.  If only the margins are given, then the seed matrix <code>X</code> is assumed to be an array filled with ones of the correct size and element type.</p><p>If the margins are not an ArrayMargins object, they will be coerced to this type.</p><p>This function returns the update matrix as an ArrayFactors object. To compute the updated matrix, use <code>Array(result) .* X</code> (see examples).</p><p>see also: <a href="#ProportionalFitting.ArrayFactors"><code>ArrayFactors</code></a>, <a href="#ProportionalFitting.ArrayMargins"><code>ArrayMargins</code></a></p><p><strong>Arguments</strong></p><ul><li><code>X::AbstractArray{&lt;:Real}</code>: Array to be adjusted</li><li><code>mar::ArrayMargins</code>: Target margins as an ArrayMargins object</li><li><code>maxiter::Int=1000</code>: Maximum number of iterations</li><li><code>tol::Float64=1e-10</code>: Factor change tolerance for convergence</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; X = [40 30 20 10; 35 50 100 75; 30 80 70 120; 20 30 40 50]
julia&gt; u = [150, 300, 400, 150]
julia&gt; v = [200, 300, 400, 100]
julia&gt; AF = ipf(X, [u, v])
Factors for 2D array:
    [1]: [0.9986403503185242, 0.8833622306385376, 1.1698911437112522, 0.8895042701910321]
    [2]: [1.616160156063788, 1.5431801747375655, 1.771623700829941, 0.38299396265192226]

julia&gt; Z = Array(AF) .* X
4×4 Matrix{Float64}:
 64.5585   46.2325   35.3843   3.82473
 49.9679   68.1594  156.499   25.3742
 56.7219  144.428   145.082   53.7673
 28.7516   41.18     63.0347  17.0337

julia&gt; ArrayMargins(Z)
Margins of 2D array:
  [1]: [150.0000000009452, 299.99999999962523, 399.99999999949796, 149.99999999993148]
  [2]: [200.0, 299.99999999999994, 399.99999999999994, 99.99999999999997]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/vankesteren/ProportionalFitting.jl/blob/19bd86bf5fac3b12f9b73662574f20d83a813a31/src/ipf.jl#L1-L47">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../benchmarks/">« Benchmarks</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Wednesday 14 September 2022 20:10">Wednesday 14 September 2022</span>. Using Julia version 1.8.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
